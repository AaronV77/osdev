# Ezek a multiboot fejlec beallitasai, kesobb reszletesen foglalkozunk veluk
.set ALIGN,    1<<0             # modulok betoltese page(4k) aligned legyen
.set MEMINFO,  1<<1             # kerunk memory map-et
.set FLAGS,    ALIGN | MEMINFO  # most osszepreseljuk egy flags objektumba
.set MAGIC,    0x1BADB002       # 'magic number', ezzel fog megtalalni a GRUB
.set CHECKSUM, -(MAGIC + FLAGS) # checksum, ellenorzeskent


# Egy uj szekcio, amit a linker script majd jo elore tesz, elvileg.
.section .multiboot
.align 4 # 4byte boundary-n legyunk!
.long MAGIC # elsonek a MAGIC number
.long FLAGS # masodiknak a flags
.long CHECKSUM # majd vegul a checksum

# foglalunk a stack-nek 16KiB-ot
.section .bootstrap_stack
stack_bottom:
.skip 16384 # 16 KiB
stack_top:

.section .text
.global _start
.type _start, @function
_start:

	movl $stack_top, %esp

	call kernel_main

	cli
	hlt
.Lhang:
	jmp .Lhang

.size _start, . - _start

